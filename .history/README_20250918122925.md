# 🚀 CrewAI Stock Analysis - Sistema Avançado de Análise de Ações

<div align="center">

![CrewAI](https://img.shields.io/badge/CrewAI-v0.56.0-blue.svg)
![Python](https://img.shields.io/badge/Python-3.11+-green.svg)
![Docker](https://img.shields.io/badge/Docker-Multi--Arch-blue.svg)
![License](https://img.shields.io/badge/License-MIT-yellow.svg)

**Sistema profissional de análise de ações usando múltiplos agentes IA especializados**

[Características](#-características) •
[Instalação](#-instalação) •
[Uso](#-uso) •
[Docker](#-docker) •
[Documentação](#-documentação)

</div>

---

## 📋 Índice

- [Visão Geral](#-visão-geral)
- [Características](#-características)
- [Arquitetura](#-arquitetura)
- [Agentes Especializados](#-agentes-especializados)
- [Instalação](#-instalação)
- [Configuração](#-configuração)
- [Uso](#-uso)
- [Docker](#-docker)
- [Exemplos](#-exemplos)
- [API e Integrações](#-api-e-integrações)
- [Contribuição](#-contribuição)
- [Licença](#-licença)

---

## 🎯 Visão Geral

O **CrewAI Stock Analysis** é um sistema avançado de análise de ações que utiliza múltiplos agentes de IA especializados para fornecer análises abrangentes e recomendações de investimento de alta qualidade. Cada agente possui expertise específica e trabalha em conjunto para criar relatórios profissionais.

### 🎪 O que torna este sistema único?

- **🤖 5 Agentes Especializados**: Cada um com expertise específica
- **🔄 Análise Colaborativa**: Agentes trabalham em sequência e compartilham insights
- **📊 Multi-Timeframe**: Análises de curto, médio e longo prazo
- **🇧🇷 Foco no Mercado Brasileiro**: Otimizado para B3 e economia brasileira
- **🐳 Docker Multi-Arquitetura**: Suporte para AMD64 e ARM64
- **📱 Interface Flexível**: CLI, batch processing e modo interativo

---

## ✨ Características

### 🎯 Tipos de Análise

| Tipo | Descrição | Agentes Envolvidos | Tempo Estimado |
|------|-----------|-------------------|----------------|
| **Quick** | Análise rápida essencial | Research + Fundamental + Technical + Consultant | 5-10 min |
| **Complete** | Análise completa com day trade | Todos os 5 agentes | 15-25 min |
| **Technical** | Foco em análise técnica | Research + Technical | 3-7 min |
| **Fundamental** | Foco em fundamentos | Research + Fundamental | 5-12 min |

### 📊 Relatórios Gerados

- **📈 Análise de Pesquisa**: Contexto geral e notícias
- **💰 Análise Fundamentalista**: Indicadores financeiros e valuation
- **📉 Análise Técnica**: Níveis, indicadores e setups
- **⚡ Estratégias Day Trade**: Setups específicos e timing
- **🎯 Recomendação Final**: Síntese e estratégia de investimento

### 🛠 Ferramentas Integradas

- **Yahoo Finance**: Dados financeiros em tempo real
- **Web Scraping**: Coleta de notícias e informações
- **Calculadora Financeira**: Métricas e indicadores
- **APIs de Notícias**: Informações atualizadas do mercado

---

## 🏗 Arquitetura

```mermaid
graph TB
    A[Main Application] --> B[Market Agents]
    A --> C[Market Tasks]
    A --> D[Tools Package]
    
    B --> E[Research Analyst]
    B --> F[Fundamental Analyst]
    B --> G[Technical Analyst]
    B --> H[Day Trader]
    B --> I[Investment Consultant]
    
    D --> J[Browser Tools]
    D --> K[Search Tools]
    D --> L[Calculator Tools]
    D --> M[YFinance Tools]
    
    C --> N[Research Task]
    C --> O[Fundamental Task]
    C --> P[Technical Task]
    C --> Q[Day Trade Task]
    C --> R[Final Recommendation]
```

---

## 🤖 Agentes Especializados

### 1. 🔍 **Analista de Pesquisa**
- **Expertise**: Coleta e interpretação de dados de mercado
- **Responsabilidades**:
  - Análise de notícias e sentimento de mercado
  - Contexto macroeconômico brasileiro e global
  - Identificação de catalisadores e riscos
  - Análise setorial e competitiva

### 2. 💼 **Analista Fundamentalista**
- **Expertise**: Análise financeira e valuation
- **Responsabilidades**:
  - Demonstrações financeiras (DRE, Balanço, DFC)
  - Indicadores fundamentalistas (P/L, ROE, ROIC)
  - Modelos de valuation e preço justo
  - Análise de dividendos e sustentabilidade

### 3. 📈 **Analista Técnico**
- **Expertise**: Análise técnica e timing de mercado
- **Responsabilidades**:
  - Identificação de tendências e padrões
  - Suporte, resistência e pontos de entrada
  - Indicadores técnicos (RSI, MACD, Médias)
  - Análise de volume e momentum

### 4. ⚡ **Consultor Day Trade**
- **Expertise**: Estratégias de curtíssimo prazo
- **Responsabilidades**:
  - Setups de day trade específicos
  - Gerenciamento de risco intraday
  - Timing preciso de entrada e saída
  - Análise de múltiplos timeframes

### 5. 🎯 **Consultor de Investimentos**
- **Expertise**: Síntese e estratégia global
- **Responsabilidades**:
  - Integração de todas as análises
  - Recomendação final ponderada
  - Estratégias por perfil de investidor
  - Gestão de portfólio e risco

---

## 📦 Instalação

### Pré-requisitos

- **Python 3.11+**
- **Docker** (opcional, mas recomendado)
- **Chave API Anthropic** (obrigatória)
- **APIs Google/News** (opcionais)

### 🐍 Instalação Local

```bash
# Clone o repositório
git clone https://github.com/rlquilez/crewai-acoes.git
cd crewai-acoes

# Crie ambiente virtual
python -m venv venv
source venv/bin/activate  # Linux/Mac
# ou
venv\Scripts\activate     # Windows

# Instale dependências
pip install -r requirements.txt

# Configure ambiente
cp .env.example .env
# Edite .env com suas chaves de API
```

### 🐳 Instalação com Docker

```bash
# Clone o repositório
git clone https://github.com/rlquilez/crewai-acoes.git
cd crewai-acoes

# Inicialização rápida
./docker/quickstart.sh

# Ou manual
cp .env.example .env
# Configure suas APIs no .env
docker-compose build
```

---

## ⚙️ Configuração

### 🔑 Configuração do Ambiente

Copie o arquivo `.env.example` para `.env` e configure suas credenciais:

```bash
cp .env.example .env
```

Edite o arquivo `.env` com suas configurações:

```bash
# OBRIGATÓRIO - Anthropic Claude
ANTHROPIC_API_KEY=sk-ant-api03-XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

# SERVIÇOS DE BUSCA E NAVEGAÇÃO (configurados automaticamente via Docker)
SEARXNG_URL=http://searxng:8080
BROWSERLESS_URL=http://browserless:3000

# OPCIONAL - Google Search (fallback quando SearXNG indisponível)
GOOGLE_API_KEY=XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
GOOGLE_CSE_ID=XXXXXXXXXXXXXXX

# OPCIONAL - News API (notícias mais atualizadas)
NEWS_API_KEY=XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

# CONFIGURAÇÕES ADICIONAIS
DEBUG=false
CACHE_ENABLED=true
MAX_SEARCH_RESULTS=10
SCRAPING_TIMEOUT=30
```

### 📝 Como Obter as APIs

#### 1. Anthropic API (Obrigatória)
1. Acesse [console.anthropic.com](https://console.anthropic.com)
2. Crie uma conta e adicione créditos
3. Gere uma API key na seção "API Keys"

#### 2. SearXNG e Browserless (Incluídos)
- **SearXNG**: Motor de busca privado incluído no Docker Compose
- **Browserless**: Serviço de navegação headless incluído no Docker Compose
- Ambos são configurados automaticamente quando você usar Docker

#### 3. Google Custom Search (Fallback Opcional)
1. Acesse [Google Cloud Console](https://console.cloud.google.com)
2. Ative a "Custom Search JSON API"
3. Crie um Custom Search Engine em [cse.google.com](https://cse.google.com)

#### 4. News API (Opcional)
1. Registre-se em [newsapi.org](https://newsapi.org)
2. Obtenha sua API key gratuita

---

## 🚀 Uso

### 📱 Linha de Comando

```bash
# Análise individual (modo rápido)
python main.py PETR4.SA

# Análise completa
python main.py PETR4.SA --type complete

# Análise técnica apenas
python main.py PETR4.SA --type technical

# Análise fundamentalista apenas
python main.py PETR4.SA --type fundamental

# Análise em lote
python main.py --batch PETR4.SA VALE3.SA ITUB4.SA

# Modo interativo
python main.py

# Listar símbolos populares
python main.py --list-symbols
```

### 🐳 Com Docker

```bash
# Análise individual
docker-compose run --rm crewai-stock-analysis python main.py PETR4.SA

# Análise em lote
docker-compose run --rm crewai-stock-analysis python main.py --batch PETR4.SA VALE3.SA

# Modo interativo
docker-compose run --rm crewai-stock-analysis python main.py

# Com Jupyter Lab
docker-compose --profile jupyter up -d
# Acesse: http://localhost:8888 (token: crewai2024)
```

### 📊 Exemplo de Saída

```
🚀 Sistema de Análise de ações CrewAI inicializado!
📅 Data: 18/09/2025 14:30
🤖 Modelo LLM: claude-3-sonnet-20240229
------------------------------------------------------------

📊 Iniciando análise de PETR4.SA
🔍 Tipo de análise: quick
============================================================

🎬 Executando análise com 4 agentes...

[Research Analyst] Coletando informações sobre PETR4.SA...
[Fundamental Analyst] Analisando demonstrações financeiras...
[Technical Analyst] Identificando níveis e tendências...
[Investment Consultant] Consolidando recomendação final...

✅ Análise de PETR4.SA concluída com sucesso!
📁 Relatórios salvos na pasta 'reports/'
```

---

## 🐳 Docker

### 🏗 Build Multi-Arquitetura

```bash
# Build para AMD64 e ARM64
./docker/build-multiarch.sh

# Build local apenas
docker build -f docker/Dockerfile -t crewai-stock-analysis .
```

### 📋 Serviços Disponíveis

```bash
# Aplicação principal
docker-compose up crewai-stock-analysis

# Com Redis para cache
docker-compose --profile cache up -d

# Com Jupyter Lab
docker-compose --profile jupyter up -d

# Todos os serviços
docker-compose --profile cache --profile jupyter up -d
```

### 🔧 Configurações Docker

| Serviço | Porta | Descrição | Perfil |
|---------|-------|-----------|--------|
| CrewAI App | - | Aplicação principal | default |
| Redis | 6379 | Cache (opcional) | cache |
| Jupyter | 8888 | Análise interativa | jupyter |

---

## 📚 Exemplos

### 🎯 Análise Completa - PETR4.SA

```python
from main import StockAnalysisApp

# Inicializar aplicação
app = StockAnalysisApp()

# Análise completa
result = app.analyze_stock("PETR4.SA", "complete")

# Resultado inclui:
# - Relatório de pesquisa
# - Análise fundamentalista
# - Análise técnica  
# - Estratégias day trade
# - Recomendação final
```

### 📊 Análise em Lote

```python
# Múltiplas ações
symbols = ["PETR4.SA", "VALE3.SA", "ITUB4.SA"]
results = app.batch_analyze(symbols, "quick")

# Processa todas as ações
# Salva relatórios individuais
# Retorna sumário consolidado
```

### 📈 Estrutura dos Relatórios

```
reports/
├── research_PETR4.SA_20250918_1430.md
├── fundamental_PETR4.SA_20250918_1430.md
├── technical_PETR4.SA_20250918_1430.md
├── daytrader_PETR4.SA_20250918_1430.md
├── final_recommendation_PETR4.SA_20250918_1430.md
└── execution_log_PETR4.SA_20250918_1430.log
```

---

## 🔌 API e Integrações

### 📊 Dados Utilizados

| Fonte | Tipo de Dados | Frequência |
|-------|---------------|------------|
| **Yahoo Finance** | Preços, volumes, fundamentals | Tempo real |
| **Google Search** | Notícias, análises | On-demand |
| **News API** | Notícias financeiras | Tempo real |
| **Web Scraping** | Informações públicas | On-demand |

### 🛠 Ferramentas Técnicas

- **RSI**: Relative Strength Index
- **MACD**: Moving Average Convergence Divergence  
- **Bollinger Bands**: Bandas de volatilidade
- **Fibonacci**: Retrações e projeções
- **Volume Profile**: Análise de volume por preço

### 💰 Indicadores Fundamentalistas

- **Valuation**: P/L, P/VPA, EV/EBITDA
- **Rentabilidade**: ROE, ROA, ROIC
- **Endividamento**: D/E, Liquidez
- **Crescimento**: CAGR, Margem, Eficiência

---

## 🤝 Contribuição

### 🔧 Desenvolvimento

```bash
# Fork e clone
git clone https://github.com/SEU_USUARIO/crewai-acoes.git
cd crewai-acoes

# Crie branch para feature
git checkout -b feature/nova-funcionalidade

# Desenvolva e teste
python -m pytest tests/

# Commit e push
git commit -m "feat: adiciona nova funcionalidade"
git push origin feature/nova-funcionalidade
```

### 📝 Issues e Sugestões

- 🐛 **Bugs**: Use o template de bug report
- ✨ **Features**: Descreva a funcionalidade desejada
- 📚 **Documentação**: Melhorias na documentação
- 🔧 **Performance**: Otimizações e melhorias

### 🧪 Testes

```bash
# Executar testes
python -m pytest

# Com coverage
python -m pytest --cov=src

# Testes específicos
python -m pytest tests/test_agents.py
```

---

## 📄 Licença

Este projeto está licenciado sob a **MIT License** - veja o arquivo [LICENSE](LICENSE) para detalhes.

---

## 🙏 Agradecimentos

- **CrewAI Team**: Framework excepcional para agentes colaborativos
- **Anthropic**: Claude 3 Sonnet para análises de alta qualidade
- **Yahoo Finance**: Dados financeiros confiáveis e gratuitos
- **Comunidade Python**: Bibliotecas e ferramentas incríveis

---

## 📞 Suporte

- **📧 Email**: [suporte@crewai-acoes.com](mailto:suporte@crewai-acoes.com)
- **💬 Discord**: [CrewAI Brasil](https://discord.gg/crewai-brasil)
- **📖 Documentação**: [docs.crewai-acoes.com](https://docs.crewai-acoes.com)
- **🐛 Issues**: [GitHub Issues](https://github.com/rlquilez/crewai-acoes/issues)

---

<div align="center">

**🚀 Feito com ❤️ por desenvolvedores brasileiros**

⭐ **Se este projeto foi útil, deixe uma estrela!** ⭐

</div>